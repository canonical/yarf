name: yarf-example-plugin
base: core24
version: '0.0.1'
summary: YARF example plugin library
description: |
  A Python library providing a YARF-compatible example plugin,
  shared via a content interface.

grade: stable
confinement: strict

plugs:
  platform-plugins:
    interface: content
    target: $SNAP/platform_plugins

parts:
  yarf-example:
    plugin: python
    source: .
    python-packages:
      - .
    stage-packages:
      - bash
    stage:
      - -src  # prevent staging the full src/ tree
    override-build: |
      craftctl default
      mkdir -p $CRAFT_PART_INSTALL/platform_plugins/yarf_plugin_example
      cp -r src/yarf_plugin_example/. $CRAFT_PART_INSTALL/platform_plugins/yarf_plugin_example/

apps:
  yarf-example-plugin:
    command: usr/bin/bash
